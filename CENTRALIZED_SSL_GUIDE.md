# é›†ä¸­å¼ SSL è¯ä¹¦ç®¡ç†

## ğŸ¯ æ–¹æ¡ˆä¼˜åŠ¿

**ä¸€å¼ é€šé…ç¬¦è¯ä¹¦æœåŠ¡æ‰€æœ‰æœåŠ¡å™¨ï¼**

| æœåŠ¡å™¨ | åŸŸå | è¯ä¹¦ |
|--------|------|------|
| æœåŠ¡å™¨ 1 | resume.gitvim.com | *.gitvim.com âœ… |
| æœåŠ¡å™¨ 2 | api.gitvim.com | *.gitvim.com âœ… |
| æœåŠ¡å™¨ 3 | app.gitvim.com | *.gitvim.com âœ… |
| ... | *.gitvim.com | *.gitvim.com âœ… |

**ä¼˜ç‚¹ï¼š**
- âœ… åªéœ€ç”³è¯·ä¸€æ¬¡
- âœ… åªéœ€ç»­æœŸä¸€æ¬¡
- âœ… è‡ªåŠ¨åˆ†å‘åˆ°æ‰€æœ‰æœåŠ¡å™¨
- âœ… ç»Ÿä¸€ç®¡ç†ï¼Œç®€å•é«˜æ•ˆ

---

## ğŸ“‹ å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»æœåŠ¡å™¨ï¼ˆgitvimï¼‰            â”‚
â”‚                                 â”‚
â”‚   â”œâ”€ Let's Encrypt é€šé…ç¬¦è¯ä¹¦   â”‚
â”‚   â”œâ”€ è‡ªåŠ¨ç»­æœŸï¼ˆæ¯å¤© 3:00ï¼‰      â”‚
â”‚   â””â”€ ç»­æœŸåè‡ªåŠ¨åˆ†å‘             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€> æœåŠ¡å™¨ 1 (resume.gitvim.com)
            â”œâ”€â”€â”€â”€â”€> æœåŠ¡å™¨ 2 (api.gitvim.com)
            â”œâ”€â”€â”€â”€â”€> æœåŠ¡å™¨ 3 (app.gitvim.com)
            â””â”€â”€â”€â”€â”€> æœåŠ¡å™¨ N ...
```

---

## ğŸš€ é…ç½®æ­¥éª¤

### 1ï¸âƒ£ åœ¨ä¸»æœåŠ¡å™¨ï¼ˆgitvimï¼‰ä¸Šè¿è¡Œ

```bash
# 1. ç¼–è¾‘é…ç½®
vim centralized-ssl-setup.sh

# ä¿®æ”¹æœåŠ¡å™¨åˆ—è¡¨ï¼š
SERVERS=(
    "root@8.130.134.196"    # ç®€å†ä¼˜åŒ–å™¨
    "root@æœåŠ¡å™¨2çš„IP"       # å…¶ä»–æœåŠ¡
    "root@æœåŠ¡å™¨3çš„IP"
    # ...
)

# 2. è¿è¡Œé…ç½®è„šæœ¬
chmod +x centralized-ssl-setup.sh
sudo ./centralized-ssl-setup.sh
```

### 2ï¸âƒ£ é…ç½® SSH å…å¯†ç™»å½•

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ï¼Œå¦‚æœå¤±è´¥ï¼Œæ‰‹åŠ¨é…ç½®ï¼š

```bash
# åœ¨ä¸»æœåŠ¡å™¨æ‰§è¡Œ
ssh-keygen -t rsa
ssh-copy-id root@8.130.134.196
ssh-copy-id root@æœåŠ¡å™¨2çš„IP
ssh-copy-id root@æœåŠ¡å™¨3çš„IP
# ... å¯¹æ‰€æœ‰æœåŠ¡å™¨
```

### 3ï¸âƒ£ æµ‹è¯•è‡ªåŠ¨åˆ†å‘

```bash
# æ¨¡æ‹Ÿç»­æœŸå’Œåˆ†å‘
sudo certbot renew --dry-run
```

---

## ğŸ”„ æ—¥å¸¸ç»´æŠ¤

### æŸ¥çœ‹è¯ä¹¦çŠ¶æ€
```bash
sudo certbot certificates
```

### æŸ¥çœ‹åˆ†å‘æ—¥å¿—
```bash
sudo journalctl -u certbot --since "1 day ago"
```

### æ‰‹åŠ¨åˆ†å‘è¯ä¹¦
```bash
sudo bash /etc/letsencrypt/renewal-hooks/deploy/distribute-certs.sh
```

---

## ğŸŒ åœ¨å„æœåŠ¡å™¨ä¸Šé…ç½® Nginx

**æ‰€æœ‰æœåŠ¡å™¨ä½¿ç”¨ç›¸åŒçš„è¯ä¹¦è·¯å¾„ï¼š**

```nginx
server {
    listen 443 ssl http2;
    server_name resume.gitvim.com;  # æ”¹æˆå¯¹åº”çš„å­åŸŸå

    ssl_certificate /root/ssl/gitvim.com/fullchain.pem;
    ssl_certificate_key /root/ssl/gitvim.com/privkey.pem;

    # ... å…¶ä»–é…ç½®
}
```

---

## âœ… ä¸€æ¬¡æ€§é…ç½®ï¼Œæ°¸ä¹…æœ‰æ•ˆ

é…ç½®å®Œæˆåï¼š

- **æ¯å¤©å‡Œæ™¨ 3 ç‚¹** è‡ªåŠ¨æ£€æŸ¥è¯ä¹¦æ˜¯å¦éœ€è¦ç»­æœŸ
- **åˆ°æœŸå‰ 30 å¤©** è‡ªåŠ¨ç»­æœŸ
- **ç»­æœŸæˆåŠŸå** è‡ªåŠ¨åˆ†å‘åˆ°æ‰€æœ‰æœåŠ¡å™¨
- **å„æœåŠ¡å™¨** è‡ªåŠ¨é‡è½½ Nginx

**æ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œï¼**

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”

| æ–¹æ¡ˆ | è¯ä¹¦æ•°é‡ | ç®¡ç†å¤æ‚åº¦ | æˆæœ¬ |
|------|----------|------------|------|
| **é›†ä¸­å¼ï¼ˆæ¨èï¼‰** | 1 å¼  | â­ | å…è´¹ |
| æ¯å°ç‹¬ç«‹ç”³è¯· | 3-7 å¼  | â­â­â­â­â­ | å…è´¹ |
| å•†ä¸šè¯ä¹¦ | 3-7 å¼  | â­â­â­â­â­ | Â¥1000+/å¹´ |

---

## ğŸ¯ æ€»ç»“

**é€‰æ‹©é›†ä¸­å¼æ–¹æ¡ˆï¼š**
- âœ… æœ€ç®€å•
- âœ… æœ€å¯é 
- âœ… é›¶æˆæœ¬
- âœ… å…¨è‡ªåŠ¨

**åªéœ€é…ç½®ä¸€æ¬¡ï¼Œæ°¸ä¹…æ— å¿§ï¼**
